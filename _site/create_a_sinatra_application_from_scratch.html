<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Create A Sinatra Application from Scratch</title>
		<link rel="stylesheet" href="/assets/css/styles.css" />
		<link type="application/atom+xml" rel="alternate" href="/feed.xml" /> <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Create A Sinatra Application from Scratch</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Create A Sinatra Application from Scratch" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Just follow the steps!" />
<meta property="og:description" content="Just follow the steps!" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-12T03:49:00+01:00" />
<script type="application/ld+json">
{"description":"Just follow the steps!","@type":"BlogPosting","url":"/create_a_sinatra_application_from_scratch","headline":"Create A Sinatra Application from Scratch","dateModified":"2018-03-12T03:49:00+01:00","datePublished":"2018-03-12T03:49:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"/create_a_sinatra_application_from_scratch"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

	</head>
	<body>
		<h1>Create A Sinatra Application from Scratch</h1>

<p>
	12 Mar 2018  
</p>

<h2 id="just-follow-the-steps">Just follow the steps!</h2>

<p>1. In your terminal, cd to where you keep your projects, then create the main directory, then cd into it. In my example my main directory is named sinatra-project.</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[code]$ mkdir sinatra-project
[code]$ cd sinatra-project
</code></pre></div></div>

<p>2. let’s make some directories:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[sinatra-project]$ mkdir app
[sinatra-project]$ mkdir app/models
[sinatra-project]$ mkdir app/views
[sinatra-project]$ mkdir app/controller
[sinatra-project]$ mkdir config
[sinatra-project]$ mkdir db
[sinatra-project]$ mkdir public
[sinatra-project]$ mkdir spec
</code></pre></div></div>

<p>3. let’s make some files:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>[sinatra-project]$ touch app/controllers/application_controller.rb
[sinatra-project]$ touch app/views/layout.erb
[sinatra-project]$ touch app/views/index.erb
[sinatra-project]$ touch config/environment.rb
[sinatra-project]$ touch public/style.css
[sinatra-project]$ touch config.ru
[sinatra-project]$ touch Gemfile
[sinatra-project]$ touch Rakefile
[sinatra-project]$ touch LICENSE.md
[sinatra-project]$ echo "# An Awesome Sinatra Application" &gt;&gt; README.md
</code></pre></div></div>

<p>4. add version control</p>

<ul>
  <li>First, have/create a github account, go to github.com/new and create your repository, initialize without a readme, as we already have that, and without gitignore or license, we already have license and can add gitignore later, I named my repository sinatra-project.</li>
  <li>Then follow here:</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git init
git add .
git commit -m "First Commit"
git remote add origin git@github.com:&lt;your-username&gt;/sinatra-project.git
git push -u origin master
</code></pre></div></div>

<p>5. Open up your project with your text editor of choice, mine is Sublime, so in terminal I simply type:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>sublime .
</code></pre></div></div>

<p>6. Let’s fill out some initial code, let’s start with Gemfile, here are the gems I used, scope them out on rubygems.org to get an idea of what they do:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>source 'http://rubygems.org'

gem 'sinatra'
gem 'activerecord', :require =&gt; 'active_record'
gem 'sinatra-activerecord', :require =&gt; 'sinatra/activerecord'
gem 'rake'
gem 'require_all'
gem 'rack-flash3'
gem 'sqlite3'
gem 'thin'
gem 'shotgun'
gem 'pry'
gem 'bcrypt'
gem "tux"

group :test do
  gem 'rspec'
  gem 'capybara'
  gem 'rack-test'
  gem 'database_cleaner', git: 'https://github.com/bmabey/database_cleaner.git'
end
</code></pre></div></div>
<p>-make sure at this point to run bundle install</p>

<p>7. Next, setup the environment.rb:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENV['SINATRA_ENV'] ||= "development"

require 'bundler/setup'
Bundler.require(:default, ENV['SINATRA_ENV'])

ActiveRecord::Base.establish_connection(
  :adapter =&gt; "sqlite3",
  :database =&gt; "db/#{ENV['SINATRA_ENV']}.sqlite"
)

require_all 'app'

</code></pre></div></div>
<p>-This is setting Sinatra’s initial environment to development, we can change this once the app is ready for production. Next, requires all your gems and tells bundler your sinatra env is development. Next creates a connection to your sqlite database, and last requires all your files in your app directory.</p>

<p>8. setup your config.ru:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require './config/environment'

if ActiveRecord::Migrator.needs_migration?
  raise 'Migrations are pending. Run `rake db:migrate` to resolve the issue.'
end

use Rack::MethodOverride
run ApplicationController
</code></pre></div></div>
<p>-Here we are requiring our environment fil we just set up, raises a helpful warning is database migrations are pending, uses Rask Method Override middle ware for update and delete actions, and finally runs our application controller model.</p>

<p>9. Next up, lets code out application_controller:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>require './config/environment'

class ApplicationController &lt; Sinatra::Base

  configure do
    set :public_folder, 'public'
    set :views, 'app/views'
    enable :sessions
  	set :session_secret, "secret"
  end

  get '/' do
  	erb :index
  end

end
</code></pre></div></div>
<p>-First we require our environemnt and then set up some basic configuration, importantly enabling sessions for users, then adding a get route action that loads our index page</p>

<p>10. Next, let’s get our layout and index pages up:</p>

<p>here is the layout.erb:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"&lt;%= url("</span><span class="err">/</span><span class="na">style</span><span class="err">.</span><span class="na">css</span><span class="err">")%</span><span class="nt">&gt;</span>"&gt;
	<span class="nt">&lt;title&gt;</span>Sinatra Project<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;</span><span class="err">%=</span> <span class="na">yield</span> <span class="err">%</span><span class="nt">&gt;</span>
	
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>-Note the use of the url method to load my css file, then drop the yield command. Sinatra will automatically look for a layout file, then layout will dynamically insert all other erb files asked for right where the yeild command is placed. (So you could put navigation, header, footer etc. into the layout so it would be the same for every page)</p>

<p>And here is index.erb:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;div class="main-content"&gt;
&lt;h1&gt;Welcome to the Home Page&lt;/h1&gt;
&lt;div&gt;
</code></pre></div></div>

<p>11. Simple css styling just to make sure it is linked up correctly, drop this is style.css:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html, body {
	width: 100%;
	height: 100%;
}

h1 {
color: red
text-align: center;
}
</code></pre></div></div>

<p>12. Setup Rakefile, this is used to automate certain tasks, mostly I use it for database migrations:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ENV["SINATRA_ENV"] ||= "development"

require_relative './config/environment'
require 'sinatra/activerecord/rake'

# Type `rake -T` on your command line to see the available rake tasks.
</code></pre></div></div>

<p>13. Check it out! Save all your files, then in the terminal start up the project by simply typing:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shotgun
</code></pre></div></div>
<p>-If everything is working, you will see something like this:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Listening on 127.0.0.1:9393
</code></pre></div></div>
<p>-Visit that address in the browser and see your page! Now, you can roll with it however you like, shotgun server will automatically update so you can see changes without having to restart the server, you can shut down shotgun with a simple crtl+c.</p>

<p>14. Lets make sure to git commit and push now, in your terminal:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit -am "Created basic template for project"
git push
</code></pre></div></div>

<p>Thanks for reading everyone, hope this helps to get your Sinatra projects up and running!!</p>



	</body>
</html>
