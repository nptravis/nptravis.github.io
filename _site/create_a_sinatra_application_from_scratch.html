<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<title>Create A Sinatra Application from Scratch</title>
		<link rel="stylesheet" href="/assets/css/styles.css" />
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css"
		/>
		<script src="https://kit.fontawesome.com/7c7973c6b2.js"></script>
		<!-- <link
			rel="stylesheet"
			type="text/css"
			href="assets/slick/slick-1.8.1/slick/slick.css"
		/>
		// Add the new slick-theme.css if you want the default styling
		<link
			rel="stylesheet"
			type="text/css"
			href="assets/slick/slick-1.8.1/slick/slick-theme.css"
		/>
 -->
		<!-- Add the slick-theme.css if you want default styling -->
		<link
			rel="stylesheet"
			type="text/css"
			href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.css"
		/>
		<!-- Add the slick-theme.css if you want default styling -->
		<link
			rel="stylesheet"
			type="text/css"
			href="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick-theme.css"
		/>

		<link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" /> <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Create A Sinatra Application from Scratch</title>
<meta name="generator" content="Jekyll v3.8.6" />
<meta property="og:title" content="Create A Sinatra Application from Scratch" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Just follow the steps!" />
<meta property="og:description" content="Just follow the steps!" />
<link rel="canonical" href="http://localhost:4000/create_a_sinatra_application_from_scratch" />
<meta property="og:url" content="http://localhost:4000/create_a_sinatra_application_from_scratch" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-03-12T03:49:00+01:00" />
<script type="application/ld+json">
{"description":"Just follow the steps!","@type":"BlogPosting","url":"http://localhost:4000/create_a_sinatra_application_from_scratch","headline":"Create A Sinatra Application from Scratch","dateModified":"2018-03-12T03:49:00+01:00","datePublished":"2018-03-12T03:49:00+01:00","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/create_a_sinatra_application_from_scratch"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

	</head>
	<body>
		<nav id="navbar">
	
	<a href="/" id="Home">
		HOME
	</a>
	
	<a href="/blog.html" id="Blog Index">
		BLOG INDEX
	</a>
	
</nav>

<div id="post-container">
	<h1 class="post-title">CREATE A SINATRA APPLICATION FROM SCRATCH</h1>

	<p class="post-date">
		12 Mar 2018  
	</p>
	<img
		class="post-image"
		src="assets/images/2018-03-12.jpg"
	/>
	<p class="post-description">
		
	</p>
	<div class="post-content">
		<h2 id="just-follow-the-steps">Just follow the steps!</h2>

<p>1. In your terminal, cd to where you keep your projects, then create the main directory, then cd into it. In my example my main directory is named sinatra-project.</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">
</span><span class="gp">[code]$</span> <span class="nb">mkdir </span>sinatra-project
<span class="gp">[code]$</span> <span class="nb">cd </span>sinatra-project
<span class="go">
</span></code></pre></div></div>

<p>2. let’s make some directories:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>app
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>app/models
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>app/views
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>app/controller
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>config
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>db
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>public
<span class="gp">[sinatra-project]$</span> <span class="nb">mkdir </span>spec
</code></pre></div></div>

<p>3. let’s make some files:</p>
<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>app/controllers/application_controller.rb
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>app/views/layout.erb
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>app/views/index.erb
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>config/environment.rb
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>public/style.css
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>config.ru
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>Gemfile
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>Rakefile
<span class="gp">[sinatra-project]$</span> <span class="nb">touch </span>LICENSE.md
<span class="gp">[sinatra-project]$</span> <span class="nb">echo</span> <span class="s2">"# An Awesome Sinatra Application"</span> <span class="o">&gt;&gt;</span> README.md
</code></pre></div></div>

<p>4. add version control</p>

<ul>
  <li>First, have/create a github account, go to github.com/new and create your repository, initialize without a readme, as we already have that, and without gitignore or license, we already have license and can add gitignore later, I named my repository sinatra-project.</li>
  <li>Then follow here:</li>
</ul>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">git init
git add .
git commit -m "First Commit"
</span><span class="gp">git remote add origin git@github.com:&lt;your-username&gt;</span>/sinatra-project.git
<span class="go">git push -u origin master
</span></code></pre></div></div>

<p>5. Open up your project with your text editor of choice, mine is Sublime, so in terminal I simply type:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="go">sublime .
</span></code></pre></div></div>

<p>6. Let’s fill out some initial code, let’s start with Gemfile, here are the gems I used, scope them out on rubygems.org to get an idea of what they do:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'http://rubygems.org'</span>

<span class="n">gem</span> <span class="s1">'sinatra'</span>
<span class="n">gem</span> <span class="s1">'activerecord'</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">'active_record'</span>
<span class="n">gem</span> <span class="s1">'sinatra-activerecord'</span><span class="p">,</span> <span class="ss">:require</span> <span class="o">=&gt;</span> <span class="s1">'sinatra/activerecord'</span>
<span class="n">gem</span> <span class="s1">'rake'</span>
<span class="n">gem</span> <span class="s1">'require_all'</span>
<span class="n">gem</span> <span class="s1">'rack-flash3'</span>
<span class="n">gem</span> <span class="s1">'sqlite3'</span>
<span class="n">gem</span> <span class="s1">'thin'</span>
<span class="n">gem</span> <span class="s1">'shotgun'</span>
<span class="n">gem</span> <span class="s1">'pry'</span>
<span class="n">gem</span> <span class="s1">'bcrypt'</span>
<span class="n">gem</span> <span class="s2">"tux"</span>

<span class="n">group</span> <span class="ss">:test</span> <span class="k">do</span>
  <span class="n">gem</span> <span class="s1">'rspec'</span>
  <span class="n">gem</span> <span class="s1">'capybara'</span>
  <span class="n">gem</span> <span class="s1">'rack-test'</span>
  <span class="n">gem</span> <span class="s1">'database_cleaner'</span><span class="p">,</span> <span class="ss">git: </span><span class="s1">'https://github.com/bmabey/database_cleaner.git'</span>
<span class="k">end</span>
</code></pre></div></div>
<p>-make sure at this point to run bundle install</p>

<p>7. Next, setup the environment.rb:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ENV</span><span class="p">[</span><span class="s1">'SINATRA_ENV'</span><span class="p">]</span> <span class="o">||=</span> <span class="s2">"development"</span>

<span class="nb">require</span> <span class="s1">'bundler/setup'</span>
<span class="no">Bundler</span><span class="p">.</span><span class="nf">require</span><span class="p">(</span><span class="ss">:default</span><span class="p">,</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'SINATRA_ENV'</span><span class="p">])</span>

<span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span><span class="p">.</span><span class="nf">establish_connection</span><span class="p">(</span>
  <span class="ss">:adapter</span> <span class="o">=&gt;</span> <span class="s2">"sqlite3"</span><span class="p">,</span>
  <span class="ss">:database</span> <span class="o">=&gt;</span> <span class="s2">"db/</span><span class="si">#{</span><span class="no">ENV</span><span class="p">[</span><span class="s1">'SINATRA_ENV'</span><span class="p">]</span><span class="si">}</span><span class="s2">.sqlite"</span>
<span class="p">)</span>

<span class="n">require_all</span> <span class="s1">'app'</span>

</code></pre></div></div>
<p>-This is setting Sinatra’s initial environment to development, we can change this once the app is ready for production. Next, requires all your gems and tells bundler your sinatra env is development. Next creates a connection to your sqlite database, and last requires all your files in your app directory.</p>

<p>8. setup your config.ru:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'./config/environment'</span>

<span class="k">if</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migrator</span><span class="p">.</span><span class="nf">needs_migration?</span>
  <span class="k">raise</span> <span class="s1">'Migrations are pending. Run `rake db:migrate` to resolve the issue.'</span>
<span class="k">end</span>

<span class="n">use</span> <span class="no">Rack</span><span class="o">::</span><span class="no">MethodOverride</span>
<span class="n">run</span> <span class="no">ApplicationController</span>
</code></pre></div></div>
<p>-Here we are requiring our environment fil we just set up, raises a helpful warning is database migrations are pending, uses Rask Method Override middle ware for update and delete actions, and finally runs our application controller model.</p>

<p>9. Next up, lets code out application_controller:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">require</span> <span class="s1">'./config/environment'</span>

<span class="k">class</span> <span class="nc">ApplicationController</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>

  <span class="n">configure</span> <span class="k">do</span>
    <span class="n">set</span> <span class="ss">:public_folder</span><span class="p">,</span> <span class="s1">'public'</span>
    <span class="n">set</span> <span class="ss">:views</span><span class="p">,</span> <span class="s1">'app/views'</span>
    <span class="n">enable</span> <span class="ss">:sessions</span>
  	<span class="n">set</span> <span class="ss">:session_secret</span><span class="p">,</span> <span class="s2">"secret"</span>
  <span class="k">end</span>

  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  	<span class="n">erb</span> <span class="ss">:index</span>
  <span class="k">end</span>

<span class="k">end</span>
</code></pre></div></div>
<p>-First we require our environemnt and then set up some basic configuration, importantly enabling sessions for users, then adding a get route action that loads our index page</p>

<p>10. Next, let’s get our layout and index pages up:</p>

<p>here is the layout.erb:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">"stylesheet"</span> <span class="na">type=</span><span class="s">"text/css"</span> <span class="na">href=</span><span class="s">"&lt;%= url("</span><span class="err">/</span><span class="na">style</span><span class="err">.</span><span class="na">css</span><span class="err">")%</span><span class="nt">&gt;</span>"&gt;
	<span class="nt">&lt;title&gt;</span>Sinatra Project<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
	<span class="nt">&lt;</span><span class="err">%=</span> <span class="na">yield</span> <span class="err">%</span><span class="nt">&gt;</span>
	
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>
<p>-Note the use of the url method to load my css file, then drop the yield command. Sinatra will automatically look for a layout file, then layout will dynamically insert all other erb files asked for right where the yeild command is placed. (So you could put navigation, header, footer etc. into the layout so it would be the same for every page)</p>

<p>And here is index.erb:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"main-content"</span><span class="nt">&gt;</span>
<span class="nt">&lt;h1&gt;</span>Welcome to the Home Page<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;div&gt;</span>
</code></pre></div></div>

<p>11. Simple css styling just to make sure it is linked up correctly, drop this is style.css:</p>
<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code>html, body {
	width: 100%;
	height: 100%;
}

h1 {
color: red
text-align: center;
}
</code></pre></div></div>

<p>12. Setup Rakefile, this is used to automate certain tasks, mostly I use it for database migrations:</p>
<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">ENV</span><span class="p">[</span><span class="s2">"SINATRA_ENV"</span><span class="p">]</span> <span class="o">||=</span> <span class="s2">"development"</span>

<span class="nb">require_relative</span> <span class="s1">'./config/environment'</span>
<span class="nb">require</span> <span class="s1">'sinatra/activerecord/rake'</span>

<span class="c1"># Type `rake -T` on your command line to see the available rake tasks.</span>
</code></pre></div></div>

<p>13. Check it out! Save all your files, then in the terminal start up the project by simply typing:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shotgun
</code></pre></div></div>
<p>-If everything is working, you will see something like this:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Listening on 127.0.0.1:9393
</code></pre></div></div>
<p>-Visit that address in the browser and see your page! Now, you can roll with it however you like, shotgun server will automatically update so you can see changes without having to restart the server, you can shut down shotgun with a simple crtl+c.</p>

<p>14. Lets make sure to git commit and push now, in your terminal:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git commit <span class="nt">-am</span> <span class="s2">"Created basic template for project"</span>
git push
</code></pre></div></div>

<p>Thanks for reading everyone, hope this helps to get your Sinatra projects up and running!!</p>


	</div>
</div>

		<script
			src="https://code.jquery.com/jquery-3.4.1.js"
			integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU="
			crossorigin="anonymous"
		></script>
		<script src="assets/js/jquery-ui.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script>
		<script
			type="text/javascript"
			src="//cdn.jsdelivr.net/gh/kenwheeler/slick@1.8.1/slick/slick.min.js"
		></script>
		<!-- <script
			type="text/javascript"
			src="assets/slick/slick-1.8.1/slick/slick.min.js"
		></script> -->

		<script src="assets/js/index.js"></script>
	</body>
</html>
